{"ast":null,"code":"import ValidationError from '../ValidationError';\nimport { once } from './async';\nexport default function runTests(options, cb) {\n  var endEarly = options.endEarly,\n      tests = options.tests,\n      args = options.args,\n      value = options.value,\n      errors = options.errors,\n      sort = options.sort,\n      path = options.path;\n  var callback = once(cb);\n  var count = tests.length;\n  if (!count) return callback(null, value);\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!ValidationError.isError(err)) {\n          return callback(err);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new ValidationError(errors, value, path));\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}","map":{"version":3,"sources":["/Users/lilijiaxin/Desktop/Code-Rena/client/node_modules/yup/es/util/runTests.js"],"names":["ValidationError","once","runTests","options","cb","endEarly","tests","args","value","errors","sort","path","callback","count","length","nestedErrors","i","test","finishTestRun","err","isError","push","apply"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,oBAA5B;AACA,SAASC,IAAT,QAAqB,SAArB;AACA,eAAe,SAASC,QAAT,CAAkBC,OAAlB,EAA2BC,EAA3B,EAA+B;AAC5C,MAAIC,QAAQ,GAAGF,OAAO,CAACE,QAAvB;AAAA,MACIC,KAAK,GAAGH,OAAO,CAACG,KADpB;AAAA,MAEIC,IAAI,GAAGJ,OAAO,CAACI,IAFnB;AAAA,MAGIC,KAAK,GAAGL,OAAO,CAACK,KAHpB;AAAA,MAIIC,MAAM,GAAGN,OAAO,CAACM,MAJrB;AAAA,MAKIC,IAAI,GAAGP,OAAO,CAACO,IALnB;AAAA,MAMIC,IAAI,GAAGR,OAAO,CAACQ,IANnB;AAOA,MAAIC,QAAQ,GAAGX,IAAI,CAACG,EAAD,CAAnB;AACA,MAAIS,KAAK,GAAGP,KAAK,CAACQ,MAAlB;AACA,MAAI,CAACD,KAAL,EAAY,OAAOD,QAAQ,CAAC,IAAD,EAAOJ,KAAP,CAAf;AACZ,MAAIO,YAAY,GAAG,EAAnB;AACAN,EAAAA,MAAM,GAAGA,MAAM,GAAGA,MAAH,GAAY,EAA3B;;AAEA,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,KAAK,CAACQ,MAA1B,EAAkCE,CAAC,EAAnC,EAAuC;AACrC,QAAIC,IAAI,GAAGX,KAAK,CAACU,CAAD,CAAhB;AACAC,IAAAA,IAAI,CAACV,IAAD,EAAO,SAASW,aAAT,CAAuBC,GAAvB,EAA4B;AACrC,UAAIA,GAAJ,EAAS;AACP;AACA,YAAI,CAACnB,eAAe,CAACoB,OAAhB,CAAwBD,GAAxB,CAAL,EAAmC;AACjC,iBAAOP,QAAQ,CAACO,GAAD,CAAf;AACD;;AAED,YAAId,QAAJ,EAAc;AACZc,UAAAA,GAAG,CAACX,KAAJ,GAAYA,KAAZ;AACA,iBAAOI,QAAQ,CAACO,GAAD,CAAf;AACD;;AAEDJ,QAAAA,YAAY,CAACM,IAAb,CAAkBF,GAAlB;AACD;;AAED,UAAI,EAAEN,KAAF,IAAW,CAAf,EAAkB;AAChB,YAAIE,YAAY,CAACD,MAAjB,EAAyB;AACvB,cAAIJ,IAAJ,EAAUK,YAAY,CAACL,IAAb,CAAkBA,IAAlB,EADa,CACY;;AAEnC,cAAID,MAAM,CAACK,MAAX,EAAmBC,YAAY,CAACM,IAAb,CAAkBC,KAAlB,CAAwBP,YAAxB,EAAsCN,MAAtC;AACnBA,UAAAA,MAAM,GAAGM,YAAT;AACD;;AAED,YAAIN,MAAM,CAACK,MAAX,EAAmB;AACjBF,UAAAA,QAAQ,CAAC,IAAIZ,eAAJ,CAAoBS,MAApB,EAA4BD,KAA5B,EAAmCG,IAAnC,CAAD,CAAR;AACA;AACD;;AAEDC,QAAAA,QAAQ,CAAC,IAAD,EAAOJ,KAAP,CAAR;AACD;AACF,KA9BG,CAAJ;AA+BD;AACF","sourcesContent":["import ValidationError from '../ValidationError';\nimport { once } from './async';\nexport default function runTests(options, cb) {\n  var endEarly = options.endEarly,\n      tests = options.tests,\n      args = options.args,\n      value = options.value,\n      errors = options.errors,\n      sort = options.sort,\n      path = options.path;\n  var callback = once(cb);\n  var count = tests.length;\n  if (!count) return callback(null, value);\n  var nestedErrors = [];\n  errors = errors ? errors : [];\n\n  for (var i = 0; i < tests.length; i++) {\n    var test = tests[i];\n    test(args, function finishTestRun(err) {\n      if (err) {\n        // always return early for non validation errors\n        if (!ValidationError.isError(err)) {\n          return callback(err);\n        }\n\n        if (endEarly) {\n          err.value = value;\n          return callback(err);\n        }\n\n        nestedErrors.push(err);\n      }\n\n      if (--count <= 0) {\n        if (nestedErrors.length) {\n          if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n          if (errors.length) nestedErrors.push.apply(nestedErrors, errors);\n          errors = nestedErrors;\n        }\n\n        if (errors.length) {\n          callback(new ValidationError(errors, value, path));\n          return;\n        }\n\n        callback(null, value);\n      }\n    });\n  }\n}"]},"metadata":{},"sourceType":"module"}